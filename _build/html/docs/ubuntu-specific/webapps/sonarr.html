

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sonarr Installation [HTPC-Sonarr] &mdash; Software Install Guides v1.5</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon1.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Software Install Guides v1.5" href="../../../index.html"/>
        <link rel="up" title="WebApps" href="index.html"/>
        <link rel="next" title="CouchPotato Movie Downloader [HTPC-CP]" href="couchpotato.html"/>
        <link rel="prev" title="WebApps" href="index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Software Install Guides
          

          
            
            <img src="../../../_static/JPLogo-Header.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Ubuntu Specific</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">WebApps</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Sonarr Installation <code class="docutils literal"><span class="pre">[HTPC-Sonarr]</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#base-requirements">Base Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#add-the-apt-source-and-install">Add the Apt Source and Install</a></li>
<li class="toctree-l4"><a class="reference internal" href="#first-run">First Run</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-autostart-init-d-file">Create Autostart init.d File</a></li>
<li class="toctree-l4"><a class="reference internal" href="#add-to-autostart-program">Add to Autostart Program</a></li>
<li class="toctree-l4"><a class="reference internal" href="#final-steps">Final Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="couchpotato.html">CouchPotato Movie Downloader <code class="docutils literal"><span class="pre">[HTPC-CP]</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="plexpy.html">PlexPy <code class="docutils literal"><span class="pre">[HTPC-PlexPy]</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="htpc-manager.html">HTPC-Manager <code class="docutils literal"><span class="pre">[HTPC-htpc]</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../downloader/index.html">Downloaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../web-server/index.html">Web Server Stuff</a></li>
<li class="toctree-l2"><a class="reference internal" href="../postfix.html">Using Postfix as Mail Relay <code class="docutils literal"><span class="pre">[POSTFIX-HowTo]</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../adding-apt-list.html">Adding an Apt-Get List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mount-drive-ubuntu.html">Mounting Unformatted Drive in Ubuntu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ubuntu_user.html">User Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#layout">Layout</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../raspberry-pi/index.html">Raspberry Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../macOS/index.html">macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general-debian/index.html">General Debian Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general-bash/index.html">General Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../git/index.html">Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../website-testing/index.html">Website Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extras/index.html">Extras</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Software Install Guides</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Ubuntu Specific</a> &raquo;</li>
      
          <li><a href="index.html">WebApps</a> &raquo;</li>
      
    <li>Sonarr Installation <code class="docutils literal"><span class="pre">[HTPC-Sonarr]</span></code></li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/docs/ubuntu-specific/webapps/sonarr.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sonarr-installation-htpc-sonarr">
<h1>Sonarr Installation <a class="reference internal" href="#htpc-sonarr" id="id1">[HTPC-Sonarr]</a><a class="headerlink" href="#sonarr-installation-htpc-sonarr" title="Permalink to this headline">¶</a></h1>
<p>Sonarr (old name was NzbDrone, which you will still see everywhere. Even in their startup file...) is, honestly, my favorite of all of the HTPC Apps. Even moreso than Plex because Plex can really be a huge resource hog.</p>
<p>The day that Sonarr really hopped into my all time fav basket was when I had began downloading a TV show outside of Sonarr. Then, when I had started adding it to Sonarr, it started searching through my directories I had inputted into its settings as a possible final download location, found the files, moved them into their correct, final spot, renamed and everything. Without missing a beat.</p>
<p>Its not without its issues, of course. But they often get fixed quickly, or they aren&#8217;t with this program, but another site or service.</p>
<div class="section" id="base-requirements">
<h2>Base Requirements<a class="headerlink" href="#base-requirements" title="Permalink to this headline">¶</a></h2>
<p>Make sure apt-transport-https is installed:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo apt-get install apt-transport-https
</pre></div>
</div>
</div>
<div class="section" id="add-the-apt-source-and-install">
<h2>Add the Apt Source and Install<a class="headerlink" href="#add-the-apt-source-and-install" title="Permalink to this headline">¶</a></h2>
<p>Luckily, here, they have a repo we can add to our apt-get lists (of which I always have seperate list files for the &#8220;outside of ubuntu/debian&#8221; standards) so we get to have easy updates and whatnot.</p>
<p>First, gotta add the key, then the repo, and then update and install.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys FDA5DFFC
<span class="nb">echo</span> <span class="s2">&quot;deb https://apt.sonarr.tv/ master main&quot;</span> <span class="p">|</span> sudo tee -a /etc/apt/sources.list.d/sonarr.list

sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install nzbdrone -y
</pre></div>
</div>
<p>Now, you&#8217;ll notice there was a TON of apps installing here... Don&#8217;t panic. This is because Sonarr - aka NzbDrone here - is actually ran using an .exe file! Can you believe it?!? But, there is an open source program called mono that, I believe if the program is compiled for it only, can we run .exe&#8217;s here! So that was all the Mono modules installing.</p>
<p>But, now we need to run Sonarr, with it outputting the actual output to your shell. This way, you can easily spot any errors, read when it tells you to fix something. Plus, its honestly cool to watch that output live as you click around in a program.</p>
</div>
<div class="section" id="first-run">
<h2>First Run<a class="headerlink" href="#first-run" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo mono /opt/NzbDrone/NzbDrone.exe
</pre></div>
</div>
<p>Now, to stop the program, <code class="docutils literal"><span class="pre">ctrl-C</span></code> sends the SIGHUP signal to try to gracefully quit the program.</p>
</div>
<div class="section" id="create-autostart-init-d-file">
<h2>Create Autostart init.d File<a class="headerlink" href="#create-autostart-init-d-file" title="Permalink to this headline">¶</a></h2>
<p>Now, we need to make the autostart file, of which, one is not supplied by the installer. I also didn&#8217;t have much luck with the ones listed on their <a class="reference external" href="https://github.com/Sonarr/Sonarr/wiki/Autostart-on-Linux">github site</a>. But the text below was coped from <a class="reference external" href="http://www.htpcguides.com/install-nzbdrone-ubuntu/">HTPCGuides.com site</a> , <a class="reference internal" href="#htpc-sonarr" id="id2">[HTPC-Sonarr]</a> which has served me very well.</p>
<p>First, edit the init.d file.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo nano /etc/init.d/nzbdrone
</pre></div>
</div>
<p>Then, copy and paste the text from below. You&#8217;ll notice the big <cite>EDIT ME</cite> text in there. Take a looksee, make your edits as you see fit.</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>#! /bin/sh
### BEGIN INIT INFO
# Provides: NzbDrone
# Required-Start: $local_fs $network $remote_fs
# Required-Stop: $local_fs $network $remote_fs
# Should-Start: $NetworkManager
# Should-Stop: $NetworkManager
# Default-Start: 2 3 4 5
# Default-Stop: 0 1 6
# Short-Description: starts instance of NzbDrone
# Description: starts instance of NzbDrone using start-stop-daemon
### END INIT INFO

############### EDIT ME ##################
# path to app
APP_PATH=/opt/NzbDrone

# user
RUN_AS=&lt;Your UserName&gt;

# path to mono bin
DAEMON=$(which mono)

# Path to store PID file
PID_FILE=/var/run/nzbdrone/nzbdrone.pid
PID_PATH=$(dirname $PID_FILE)

# script name
NAME=nzbdrone

# app name
DESC=NzbDrone

# startup args
EXENAME=&quot;NzbDrone.exe&quot;
DAEMON_OPTS=&quot; &quot;$EXENAME

############### END EDIT ME ##################

NZBDRONE_PID=`ps auxf | grep NzbDrone.exe | grep -v grep | awk &#39;{print $2}&#39;`

test -x $DAEMON || exit 0

set -e

#Look for PID and create if doesn&#39;t exist
if [ ! -d $PID_PATH ]; then
    mkdir -p $PID_PATH
    chown $RUN_AS $PID_PATH
fi

if [ ! -d $DATA_DIR ]; then
    mkdir -p $DATA_DIR
    chown $RUN_AS $DATA_DIR
fi

if [ -e $PID_FILE ]; then
    PID=`cat $PID_FILE`
    if ! kill -0 $PID &gt; /dev/null 2&gt;&amp;1; then
        echo &quot;Removing stale $PID_FILE&quot;
        rm $PID_FILE
    fi
fi

echo $NZBDRONE_PID &gt; $PID_FILE

case &quot;$1&quot; in
    start)
    if [ -z &quot;${NZBDRONE_PID}&quot; ]; then
        echo &quot;Starting $DESC&quot;
        rm -rf $PID_PATH || return 1
        install -d --mode=0755 -o $RUN_AS $PID_PATH || return 1
        start-stop-daemon -d $APP_PATH -c $RUN_AS --start --background --pidfile    $PID_FILE --exec $DAEMON -- $DAEMON_OPTS
    else
        echo &quot;NzbDrone already running.&quot;
    fi
    ;;
    stop)
        echo &quot;Stopping $DESC&quot;
        echo $NZBDRONE_PID &gt; $PID_FILE
        start-stop-daemon --stop --pidfile $PID_FILE --retry 15
    ;;
    restart|force-reload)
        echo &quot;Restarting $DESC&quot;
        start-stop-daemon --stop --pidfile $PID_FILE --retry 15
        start-stop-daemon -d $APP_PATH -c $RUN_AS --start --background --pidfile $PID_FILE --exec $DAEMON -- $DAEMON_OPTS
    ;;
    status)
        # Use LSB function library if it exists
        if [ -f /lib/lsb/init-functions ]; then
            . /lib/lsb/init-functions
            if [ -e $PID_FILE ]; then
                status_of_proc -p $PID_FILE &quot;$DAEMON&quot; &quot;$NAME&quot; &amp;&amp; exit 0 || exit $?
            else
                log_daemon_msg &quot;$NAME is not running&quot;
                exit 3
            fi
        else
            # Use basic functions
            if [ -e $PID_FILE ]; then
                PID=`cat $PID_FILE`
                if kill -0 $PID &gt; /dev/null 2&gt;&amp;1; then
                    echo &quot; * $NAME is running&quot;
                    exit 0
                fi
            else
                echo &quot; * $NAME is not running&quot;
                exit 3
            fi
        fi
    ;;
    *)
        N=/etc/init.d/$NAME
        echo &quot;Usage: $N {start|stop|restart|force-reload|status}&quot; &gt;&amp;2
        exit 1
        ;;
    esac

exit 0
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See <a class="reference internal" href="../ubuntu_user.html#user-management"><span class="std std-ref">User Management</span></a> for notes on adjusting user permissions with regards to programs and allowing the web access to your machines.</p>
</div>
</div>
<div class="section" id="add-to-autostart-program">
<h2>Add to Autostart Program<a class="headerlink" href="#add-to-autostart-program" title="Permalink to this headline">¶</a></h2>
<p>Then, make the script executable and add to your autostart program. In the below example, its using Ubuntu&#8217;s <code class="docutils literal"><span class="pre">system</span> <span class="pre">&lt;program&gt;</span> <span class="pre">start</span></code> program.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo chmod +x /etc/init.d/nzbdrone
sudo update-rc.d nzbdrone defaults
</pre></div>
</div>
</div>
<div class="section" id="final-steps">
<h2>Final Steps<a class="headerlink" href="#final-steps" title="Permalink to this headline">¶</a></h2>
<p>Then, start the program with <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">service</span> <span class="pre">nzbdrone</span> <span class="pre">start</span></code> and if you see no error codes - which for some reason Ubuntu 16 wont always show on init.d scripts... Check your HTOP processes to see if its running. If not, <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">service</span> <span class="pre">nzbdrone</span> <span class="pre">status</span></code> - then the program should be running.</p>
<p>You can see it at <a class="reference external" href="http://localhost:8989">http://localhost:8989</a> if its running on the same machine as your browser. Otherwise put in the machines IP address instead of <code class="docutils literal"><span class="pre">localhost</span></code>.</p>
<table class="docutils citation" frame="void" id="htpc-sonarr" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[HTPC-Sonarr]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>)</em> These directions were liberally copied from <a class="reference external" href="http://www.htpcguides.com/install-nzbdrone-ubuntu">HTPCGuides.com</a></td></tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="couchpotato.html" class="btn btn-neutral float-right" title="CouchPotato Movie Downloader [HTPC-CP]" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="WebApps" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 Justin Partain.
      Last updated on November 21, 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>