<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Justin Partain">
  
  <title>PostFix - Software Installation Guides</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "PostFix";
    var mkdocs_page_input_path = "ubuntu/Postfix.md";
    var mkdocs_page_url = "/ubuntu/Postfix/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-75489042-5', 'jpcdi.com/sig');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Software Installation Guides</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Ubuntu</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../couchpotato/">CouchPotato</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ddclient/">DDClient</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../htpc-manager/">HTPC Manager</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../nginx-from-source/">NGINX from Source</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../nginx-from-ubuntu-ppa/">NGINX Using Ubuntu PPA</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../openvpn/">OpenVPN</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../plexpy/">PlexPy</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">PostFix</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#configure-postfix-as-a-send-only-smtp-server">Configure Postfix as a "Send-Only" SMTP Server</a></li>
                
                    <li><a class="toctree-l4" href="#introduction">Introduction</a></li>
                
                    <li><a class="toctree-l4" href="#install-postfix">Install Postfix</a></li>
                
                    <li><a class="toctree-l4" href="#configure-postfix">Configure Postfix</a></li>
                
                    <li><a class="toctree-l4" href="#make-sure-that-the-smtp-server-can-send-emails">Make sure that the SMTP Server can Send Emails</a></li>
                
                    <li><a class="toctree-l4" href="#forward-root-system-email">Forward Root System Email</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../sonarr/">Sonarr</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../telegram-for-sonarr/">Telegram for Sonarr</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../transmission-daemon/">Transmission-Daemon</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Raspberry Pi</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../rpi/boot-from-usb/">Run OS from USB</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../rpi/domotz-rpi/">Domotz RPI</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>General UNIX</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../gen_unix/ansible-adhoc/">Ansible Adhoc Refresh</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../gen_unix/transmission-web-gui/">Transmission Web GUI Change</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../gen_unix/virtualbox-guest-addition/">VirtualBox Guest Additions on Ubuntu Guest</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../gen_unix/ratom/">Install Ratom or Remote Atom</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Other Informationals</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../more_info/bash-if-conditionals/">Bash IF Conditionals</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Software Installation Guides</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Ubuntu &raquo;</li>
        
      
    
    <li>PostFix</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="configure-postfix-as-a-send-only-smtp-server">Configure Postfix as a "Send-Only" SMTP Server</h1>
<h2 id="introduction">Introduction</h2>
<p>Postfix is an MTA (Mail Transfer Agent), an application used to send and receive email. In this tutorial, we will install and configure Postfix so that it can be used to send emails by local applications only â€“ that is, those installed on the same server that Postfix is installed on.</p>
<h2 id="install-postfix">Install Postfix</h2>
<pre><code class="bash">sudo apt-get install mailutils
</code></pre>

<p>Now, during this installation, the system will prompt you with a Configuration Option. Since we will be using an outside service to send our mail - aka <a href="../smtp.gmail.com">smtp.gmail.com</a> - we will select <code>Internet Site</code>.</p>
<p><img alt="PostFix Installation Configuration Question" src="../docs/img/PostFix_Config_Inst.png" /></p>
<p>Then, it will continue on with <code>System Mail Name</code></p>
<p>I like to know which of my Virtual Machines or Unix systems might be messaging me, so I like to set these according to 'os-hostname.webaddress.com', or 'ubuntu-nginx.jpcdi.com</p>
<table>
<thead>
<tr>
<th>system-name</th>
<th>FQDN Address</th>
<th>com</th>
</tr>
</thead>
<tbody>
<tr>
<td>os-hostname</td>
<td>webaddress</td>
<td>com</td>
</tr>
<tr>
<td>ubuntu-nginx</td>
<td>jpcdi</td>
<td>com</td>
</tr>
</tbody>
</table>
<h2 id="configure-postfix">Configure Postfix</h2>
<p>We will be setting the system to process emails only from "the server on which it is running," aka the <code>localhost</code> or <code>loopback interface</code>. That way, when postfix "receives" an email from the system - for say, root - it will use Postfix to forward the email off through our specified smtp server.</p>
<p>So, to start:</p>
<pre><code class="bash">sudo nano /etc/postfix/main.cf
</code></pre>

<p>Towards the bottom, find</p>
<pre><code class="bash">mailbox_size_limit = 0
recipient_delimiter = +
inet_interfaces = all
</code></pre>

<p>Change the line that reads <code>inet_interfaces = all</code> to <code>inet_interfaces = loopback-only</code>. The text should look like:</p>
<pre><code class="bash">mailbox_size_limit = 0
recipient_delimiter = +
inet_interfaces = loopback-only
</code></pre>

<p>You can also use <code>localhost</code> if you'd prefer. Make sure to restart Postfix when you're finished.</p>
<pre><code class="bash">sudo service postfix restart
</code></pre>

<h2 id="make-sure-that-the-smtp-server-can-send-emails">Make sure that the SMTP Server can Send Emails</h2>
<p>This is testing if the actual forwarding part works.</p>
<p>To send a test email over the command line:</p>
<pre><code class="bash">echo &quot;This is the body of the email&quot; | mail -s &quot;This is the subject line&quot; user@example.com
</code></pre>

<p>Making sure to put your email address in place of <code>user@example.com</code>. You should receive the email within a few seconds.</p>
<h2 id="forward-root-system-email">Forward Root System Email</h2>
<p>Now, last big thing.</p>
<p>A lot of the programs in Linux love to send mail to the root user. Which would be why sometimes, when you ssh into your machine, it'll show "New Mail" or "You have Mail".</p>
<p>To configure Postfix so that these system-generated emails are sent to you, edit the <code>/etc/aliases</code> file:</p>
<pre><code class="bash">sudo nano /etc/aliases
</code></pre>

<p>The file should be tiny, something like:</p>
<pre><code class="bash"># See man 5 aliases for format
postmaster:    root
</code></pre>

<p>The <code>postmaster: root</code> is the part that tells your system where to send that mail, with <code>postmaster</code> being a low-level, unix app.</p>
<p>So, in order to forward the mail to you?</p>
<pre><code class="bash"># See man 5 aliases for format
postmaster:    root
root:       example@example.com
</code></pre>

<p>Simple redirection/rerouting. Obviously put in the email address you want to receive the emails at.</p>
<p>Then, once you saved the file,</p>
<pre><code class="bash">sudo newaliases
</code></pre>

<p>And send another email:</p>
<pre><code class="bash">echo &quot;This is the body of the email&quot; | mail -s &quot;This is the subject line&quot; root
</code></pre>

<p>Honestly, when I performed these steps, I actually received about 10 emails to my spam because my root mail was building up so much!</p>
<hr />
<p>Copied liberally from <a href="../www.digitalocean.com">DigitalOcean's</a> <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-postfix-as-a-send-only-smtp-server-on-ubuntu-14-04">How to Install and Configure Postfix</a></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../sonarr/" class="btn btn-neutral float-right" title="Sonarr">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../plexpy/" class="btn btn-neutral" title="PlexPy"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../plexpy/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../sonarr/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
